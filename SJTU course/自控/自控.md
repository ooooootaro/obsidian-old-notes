Principle of Automatic Control
# 序
控制系统理论不仅仅包含常见PID控制或者简单的倒摆控制，它的含义很广泛，具体包括了：
* building models
* simulating predictions
* dynamic interactions
* filtering / rejecting noise
* selecting / build
* 
* ing handware
* testing
It's understanding ur system

*控制对象  控制目标*  
将这两个概念融入上面的流程，进行适当的扩充和重新排序，就变成了：

- 建立控制对象的数学模型；
- 根据控制目标选择并建立控制器；
- 将控制器与控制对象动态交互；
- 交互过程中加入噪音滤除装置；
- 用仿真预测控制结果；
- 在实际系统中测试和验证上述控制结果
![[Pasted image 20231212012350.png]]

**开环控制**指输入不依赖于输出的控制方式；
而**闭环控制**指输出会反馈给输入端从而影响输入的控制方式。
闭环系统的好处：

- 具备自适应调节的能力，可以自动调节输入信号，使系统输出我们想要的参考值，且这一过程不需要人为干预；
- 稳定性更高，自适应能力提高了系统稳定性，因为它能对不合理的输入进行“纠正”，防止不合理输入带来的系统崩溃；

# frequency domain
![[Pasted image 20231212013134.png]]
### 可能会有疑问，时域信号刚好是三角函数时，很好理解，万一不是三角函数时怎么办？

此时，傅利叶级数出场了。

傅里叶从数学上证明了，对于满足狄利克雷定理的周期信号，可以分解成无数个正弦函数叠加。其中频率最小的正弦信号，我们将它称作基波，其它正弦信号的频率刚好是基波的整数倍，我们将它们叫做高次谐波。这样时域信号就能在频域上表示出来了，是无数个离散的点。
非周期信号其实可以看成是周期T趋近于无穷的周期信号。信号的周期越大，所需要的特定频率的正弦信号就越多；当周期T趋于无穷时，每个频率的正弦信号都要有，于是无数个表示频率的点放在一起就构成了线，在频域坐标系下看，就是一条连续的曲线。





至此，我们完成了所有种类的时域信号到频域的转换，

- 正弦信号 → 一个点
- 非正弦周期信号 → 离散的点
- 非周期信号 → 连续的线


#  LTI system
Linear and time invariance system
- 齐次性：“输入-输出”可以被等比例放大
- 可叠加性 ：成对的“输入-输出”可以直接加在一块
- 不变性：啥时候给输入都行，输出始终不离不弃

不管是做工程的人，还是做理论的人，都喜欢上述几个性质，尤其是线性。
“Linear system are important because we can solve them. ” —— Richard Feynman
#### 线性 
线性系统是可解的，我们能够建立准确的代数模型，从而通过模型的解预测系统的状态。做控制的人都熟知[小信号分析](https://www.zhihu.com/search?type=content&q=%E5%B0%8F%E4%BF%A1%E5%8F%B7%E5%88%86%E6%9E%90)，这就是一种将模型在平衡点附近线性化的方法，因为在此基础上能准确预测系统的稳定性；做优化的人都习惯将目标函数线性化、约束线性化，因为这样能保证得到全局最优解，避免陷入局部最优或者迭代不收敛。

所以说，线性，是一种“优美的性质”


# Transform
a mapping between domains
控制中大都使用频域信号来分析系统，它使用起来更方便。
#### Conv
## 下面从控制的角度解释为什么需要卷积
控制，要求我们精确知道每个时刻系统的状态是什么，那系统当前的状态是由什么决定的呢？
**系统初始状态** **+ 之前所有时刻的输入。**
线性时不变(LTI)系统满足叠加定理，因此，只要我们将**之前所有时刻的输入带来的当前时刻响应**叠加，再加上系统初始状态，就能得到当前时刻系统的输出了。

[(20 条消息) 如何通俗易懂地解释卷积？ - 知乎 (zhihu.com)](https://www.zhihu.com/question/22298352/answer/637156871)
#### Fourier
[傅里叶系列（一）傅里叶级数的推导 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/41455378)
##### 用正弦函数作为基础波形的好处 :
从数学上解释，因为正弦函数具备**正交性**（划重点，这也是傅利叶变换公式成立的前提），更适合作为基底。
频域的正弦信号本质是时域量的基底（线性代数概念）
将时域信号（所有基）与频率为w0的正弦信号积分，由于三角函数的正交特性，非w0的信号都无法与之配对成功（正交特性使之积分后为0），这样就只有和频率w0相关的量保留了下来。而这，刚好是我们想要的！
其次是表示起来更方便，正弦信号线性通过线性时不变系统后，信号形状不会变化，仍然是正弦，仅有幅值和相位两个量发生变化。所以用幅值相位，再配合频率，就能完美地刻画信号及其变化了。


#### Laplace
[从另一个角度看拉普拉斯变换 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/40783304) 
#### 常微分方程的解
###### 大部分工程问题到最后都会转化为一个数学问题
经典控制领域，我们费尽心思进行了各种样的变换和计算，最终都是为了得到常微分方程的解。
那为什么常微分方程的解这么重要呢？根本原因是现实中的系统、现象、亦或物理规律，大都可以用常微分方程来描述。系统的表现、现象的变化规律的演化都与方程的解息息相关。

举一个拉弹簧的例子。根据牛二定律，很容易写出作用力F，与物块位移x的关系。它们都是关于时间的t的函数，但我们解出方程的解x(t)时自然就知晓了物块的轨迹。

控制中的稳定指系统在受到扰动后还能回归到平衡点。具体的表现就是：扰动量的系统响应随着时间的增长最后会归零。而扰动量的系统响应就与常微分方程的解联系到一起。

经典控制理论里遇到的常微分方程解有着统一的形式： e^{at}\times sin(wt) ，它表示着扰动响应随时间的变化。而t前面的系数a决定了最终的稳定结果

# Transfer Function
TF: Laplace Transform of the impulse response of an LTI system when I.C. = 0.
它描述了系统对能够细分的最小信号——单位冲击信号的响应结果。将传递函数与输入相乘，就能方便预测输出。当我们能预测输出时，就能进一步设计出很好的控制器。


# Feedback 

![[Pasted image 20231212015257.png]]
不存在反馈，相当于**闭着眼在操控摇杆写字**。
我们只管写，也不知道黑板上的字是不是真的是我们想要的。

那加入反馈的控制变成啥样呢？
没错，就是**睁着眼睛操控摇杆写字。**
![[Pasted image 20231212015503.png]]
将上面的大脑(BRAIN)换成控制器(CONTROLLER)，将眼睛(EYES)换成观测器(OBSERVER)，就构成了完整的**闭环控制**。




# Steability
#### 稳定性是系统在收到扰动后回到正常状态的能力，
这里扰动和响应都是有界的，因此也被称作 
Bounded-input-bounded-output stability
![[Pasted image 20231212093229.png]]
自动控制理论就是想设计合理的控制器，
使得系统最终可控（able to track reference）和稳定（stability )


#### critirion
传递函数已知时，输出X(s)=u(s)*G(s)。设输入是单位冲击响应，这里用冲击响应的原因是：线性时不变系统满足叠加定理，任意输入都可以看成无数冲击响应的叠加，若冲击响应造成的扰动最后归于0时，其它bounded distrubance造成的扰动响应也会归于0，系统稳定。单位冲击响应的拉普拉斯变换为1，这样输出就等于传递函数，对其进行拉普拉斯反变换后得到时域输出。
实际上，极点的实部和虚部，分别对应着时域响应的幅值部分和三角函数部分。对于虚部，根据欧拉公式， e^it  在时域下就是关于t三角函数。对于实部，如果小于0，则幅值会指数衰减，最终稳定；如果等于0，则幅值不变（即震荡）；t大于零则幅值指数增大，发散不稳定。
![[Pasted image 20231212094206.png]]
至此，我们知道通过传递函数的极点可以判断系统稳定性。控制工程师通过设计合理的控制器，改变系统整体的传递函数，达到好的控制效果，但反复求解极点是一件麻烦的事情。因此，聪明的前辈提出了很多方法来辅助判断稳定性，比如劳斯判据，根轨迹，奈奎斯特稳定判据等，这些都是围绕极点展开的方法。

这种思想一直延申到了现代控制领域，现代控制中系统的状态空间方程是：dot x = Ax+Bu，矩阵A的特征值正对应着传递函数的极点，特征根小于0则系统稳定，最后殊途同归。
#### E.J.Routh,1877年提出了劳斯判据
两个特例：

- Case 1: 某行第一个元素是0，但后面元素不是0。处理方法：用一个很小数代替0，接着往下算。
- Case 2: 某行全是0。处理办法：用上一行的系数构造多项式，对s求导后替代全0行的元素，接着往下算。

劳斯判据是一种借助特征方程系数来判断系统稳定性的方法，
最终的落脚点还是“**传递函数极点在复平面左半平面**”，
对于高阶系统，使用起来尤为方便。
此外，借助劳斯表还能辅助判断控制器参数的范围,活用知识。
# 频域分析法
1932年，**Nyquist 提出频域稳定判据；**1940年，**Bode 提出了在对数坐标系下**简化作图的方法。
应用对象广泛。不仅适用于二阶系统，也适用于高阶系统；不仅适用于线性定常系统，也可推广应用于某些非线性系统。
最小相位系统的幅频和相频特性之间存在唯一的对应关系，利用Nyquist稳定判据可由开环频率特性判别闭环系统的稳定性，用相角裕量和幅值裕量来反映系统的相对稳定性。利用等M圆和等N圆可由开环频率特性求闭环频率特性，进而定性或定量分析系统的时域响应。
**开环频率特性去分析闭环系统的性能（稳定性、稳定裕度及动态性能）**

已知系统的传递函数，令 s=jω，可得系统的频率特性（无论稳定与否）
也可以由实验方法获得系统的频率特性。方法是根据稳态输出的幅值比和相位差得到。但是不能针对不稳定系统，因为它的输出会存在振荡和发散。

#### 频域性能指标
间接地表明系统动静态特性

不懂
3. 频带 指幅频特性_A_(_ω_)的幅值衰减到起始值的0.707倍所对应的频率。 大，系统复现快速变化信号的能力强、失真小。即系统的快速性好，阶跃响应的上升时间短，调节时间短；

4. _A_(0)指零频(_ω_=0)时的幅值。_A_(0)表示系统阶跃响应的终值，_A_(0)与1相差的大小，反映了系统的稳态精度，_A_(0)越接近于1，系统的精度越高

**频率特性曲线共有三种：幅相频率特性曲线（Nyquist曲线），对数频率特性曲线（又称Bode图），对数幅相频率特性曲线（又称Nichols曲线）**
幅频特性是关于 ![\omega](https://www.zhihu.com/equation?tex=%5Comega&consumer=ZHI_MENG) 的偶函数；相频特性是关于![\omega](https://www.zhihu.com/equation?tex=%5Comega&consumer=ZHI_MENG)的奇函数。

#### 开环系统极坐标图的绘制

#### Nyquist稳定判据
理论基础是复变函数理论中的幅角定理，也称映射定理

#### **Nyquist**稳定判据二
式中 υ——开环传递函数中位于原点的极点个数


# 知乎
控制问题的三个基本类型：**Regulation**, **Tracking** 和 **Program-based control**
*调节/镇定问题Regulation
是控制系统输出并保持到某一个预定的工作点（set point）的问题

![[Pasted image 20231213224457.png]]
reference input应当是一个已知的常值。注意这里输入是对整个系统来讲的，而不是对被控系统（plant）或者过程（process）来讲的。
Plant的直接输入U(s)来自驱动器或者执行器（actuator），而actuator的动作量就是由控制器根据参考输入与输出间运算结果进行进一步计算得到的。

调节问题的目标就是设计一个控制器（controller）或者叫补偿器（compensator），我们也常称调节问题的控制器为调节器（regulator），使得plant或者process能够维持在设定的set point（set point由reference input确定）

在这里我们注意到我们引入了sensor用来测量系统输出，并将测量值返回到了reference input端，至于为什么要测量输出并返回，我们会在稳定性一节中深入讨论。 目前我们只需要知道，作为调节问题而言，这样的系统结构是必须的。我们把这样的系统结构称为闭环结构（closed-loop structure）



*跟踪问题Tracking
实现控制系统的输出实时地跟踪参考输入信号的问题，是一类控制的基本问题，也是极具挑战的问题。（导弹跟踪飞机）

Tracking问题的描述是设计一个控制器能够产生控制量，控制plant的输出总是跟踪输入的未知参考信号。注意这里未知的含义，输入参考信号本身就是随机的，人和被控系统都无法预测未来某一秒的输入。我们在设计时如果知道参考信号的特点，比如知道是正弦信号，但不知道幅值和相位，这会大大有利于设计。如果我们面对的完全随机的信号，设计时就要考虑全面，跟踪难度也会增加。

与regulation问题不同的是，tracking的输入信号通常会是一个未知信号，且变化速度很快时，控制器设计的要求就会比较高



*程序控制 Program-based control
完全可以采用开环结构解决（open-loop structure）
交通信号灯 、在控制精度要求不高或者干扰很小、干扰可知的场合中，多数的程序控制问题会采用开环控制，这样系统的响应速度能大大加快。工业制造上的机械手，数控机床和PLC等都是程序控制的案例，它们根据事先编好的程序进行运行，而不需要输出信息来干预输入。

Note：现在很多国家也有反馈信号辅助的信号灯系统

### ODE
ODE分为线性(Linear)和非线性(Nonlinear)的。在经典控制的范畴中，我们关注点主要在线性常系数ODE，也会设计到非常系数的ODE。前者描述的系统我们称之为线性时不变系统，或者常称为线性定常系统（Linear Time-Invariant System，LTI System）。下面所述的ODE均为线性常系数ODE（Constant-Coefficient Linear ODE）
